%\begin{center}
	%{\Huge \textbf{Abstract}}
%\end{center}
%\vspace{2cm}

\chapter*{Abstract}
\addcontentsline{toc}{chapter}{Abstract}
\thispagestyle{plain}
Hadron therapy is a type of oncological radiotherapy for the treatment of solid tumors that uses proton or
ion beams instead of conventional X-rays. The usage of hadron particles allows a better control on the energy release,
improving the precision of the treatment and the conservation of healthy tissues around the target.
Particle beams are obtained by means of dedicated accelerators, requiring a precise control of particle flux and beam profile.
Thus beam-monitoring systems become of primary importance, demanding the usage of fast particle sensors and readout electronics to monitor
in real-time the particle beam reaching the patient.\\

In this context the Medical Physics group at University of Turin and INFN (the Italian National Institute for
Nuclear and Particle Physics) is participating to the MoVeIT (Modeling and Verification for Ion beam Treatment planning) research project, which aims to develop new and
innovative models for biologically optimized Treatment Planning Systems (TPS) using ion beams in hadron therapy.
As part of the project the Turin group is involved in the development of solid state detectors and custom readout electronics for measuring with high precision
the characteristics of the hadron beam before and during the irradiation, such as number of particles delivered per unit time, energy and beam profile.\\

Low-Gain Avalanche Diode (LGAD) thin silicon sensors segmented in strips have been selected as a promising choice for the implementation
of the final beam-monitoring system. Thanks to the internal gain mechanism this sensor technology allows to obtain a large
Signal-to-Noise Ratio (SNR) for very low amounts of deposited charge. This allows to detect and count single beam particles.

\noindent Silicon strips are read out by a full-custom and optimized Application Specific Integrated Circuit (ASIC) designed by Torino INFN.
The chip, named ABACUS (Asynchronous-logic-Based Analog Counter for Ultra fast Silicon strips), has been 
designed using a commercial CMOS 110~nm technology and integrates 24 readout channels. Each channel includes a low-noise charge preamplifier 
and a fast discriminator. The external data acquisition system uses commercial Field Programmable Gate Array (FPGA) boards that receive
the data from up to 6 readout chips.\\% A second version of the chip, refered as ABACUS2 \\

\newpage
\thispagestyle{plain}
This thesis presents my personal contributions on the upgrade of the FPGA firmware used to characterize
the second version of the ABACUS chip and measurement results.
The FPGA used to readout the chip is a Kintex-7 KC705 board by Xilinx programmed using the VHDL Hardware Description Language. The FPGA
is responsible for both the chip configuration and data readout.

\noindent The first part of my work describes the upgraded VHDL firmware, which includes several new features such as:
i) the creation of a debugging tool for malfunctioning channels on the FPGA board;
ii) the complete rewriting of the internal Digital to Analog Converter (DAC) configuration system for the new ABACUS chip, which
now uses an address-based system with an I2C controller instead of a serial method (I2C protocol);
iii) the implementation of a latch for internal counters;
iv) the addition of a timestamp generator for a more accurate calculation of the particle rate.
\newline
The second part of the thesis presents obtained experimental results that validated the new FPGA firmware extensions.
Measurements include threshold scans studies to quantify the threshold dispersion between channels and rate calculations.
\vspace{1cm}
\newline
This thesis is organized as follow:
\vspace{0.25cm}
\newline
Chapter 1 describes the physical mechanisms and advantages of hadron-therapy compared to conventional radiotherapy. The most advanced dose distribution systems and the detectors used are described.
\vspace{0.25cm}
\newline
Chapter 2 describes the devices developed within the MoVeIT project for dose monitoring.
In particular it is shown the operating principle of the LGAD sensors used and their advantages for the application under study.
The characteristics of the chip developed by the INFN section of Turin for the amplification and discrimination of signals are also described.
\vspace{0.25cm}
\newline
Chapter 3 contains a brief history of the FPGA, its main components and a comparison with ASICs and others programmable devices.
After that there is a short introduction to the hardware description languages and the associated design workflow.
There is a brief discussion on the tools used for the development and lastly it is described the FMC debug tool that I implemented.
\vspace{0.25cm}
\newline
Chapter 4 contains a description of the FPGA firmware and a detailed explanation of the implemented extensions, which are: the trimming DACs configuration logic, the counter latch system and of the timestamp generator.
For each new addition software simulation and considerations on the implemented design are included.
\vspace{0.25cm}
\newline
Chapter 5 describes the hardware devices involved in the project such as the test setup, the test board and the voltage translator.
For each addition to the firmware tests on board have been performed and described.
